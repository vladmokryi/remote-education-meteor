<template name="editTest">
    <div id="test-edit" class="modal fade" role="dialog">
        <div class="modal-dialog modal-lg">
            <!-- Modal content-->
            <div class="modal-content">
                <form class="form">
                    {{#with test}}
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title">Тест</h4>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label>Назва</label>
                                <input required class="form-control" type="text" value="{{name}}" id="name"/>
                            </div>
                            <div class="form-group" id="questions">
                                <label>Питання</label>
                                <ol>
                                    {{#each questions}}
                                        {{#let questionIndex=@index}}
                                            <li class="question-block">
                                                <div class="input-group"
                                                     style="margin-bottom: 1em; margin-top: -1.8em;">
                                                    <input class="form-control question" data-id="{{@index}}"
                                                           type="text" value="{{name}}"/>
                                                    <span class="input-group-btn">
                                        <button class="btn btn-danger delete-question" data-id="{{@index}}"
                                                type="button">Видалити</button>
                                    </span>
                                                </div>
                                            </li>
                                        {{/let}}
                                    {{/each}}
                                </ol>
                                <div class="btn btn-success btn-block" id="add-question">Додати Питання</div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="submit" class="btn btn-primary">Зберегти</button>
                            <button type="button" class="btn btn-default" data-dismiss="modal">Закрити</button>
                        </div>
                    {{/with}}
                </form>
            </div>
        </div>
    </div>
</template>

<template name="test">
    {{#with test}}
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3>{{name}}</h3>
            </div>
            <div class="panel-body">
                {{#if testResult}}
                    {{#if result}}
                        <h3 class="text-center">Ваш результат: <span class="badge">{{testResult.result}}</span> / <span
                                class="badge">100</span></h3>
                        {{else}}
                            <h3 class="text-center">Перевіряється...</h3>
                        {{/if}}
                {{else }}
                    <form id="answers">
                        <div>
                            <ol>
                                {{#each questions}}

                                        <li style="margin-bottom: 1em;">
                                            {{name}}
                                            <textarea class="answer form-control" data-id="{{@index}}"></textarea>
                                        </li>
                                {{/each}}
                            </ol>
                        </div>
                        <button type="submit" class="btn btn-success" id="test-done" data-id="{{testResult._id}}">Відіслати відповіді
                        </button>
                    </form>
                {{/if}}
            </div>
        </div>
    {{/with}}
</template>

<template name="testResults">
    <div class="panel panel-default">
        <div class="panel-heading">
            <h3>Результати тестування</h3>
        </div>
        <div class="panel-body">
            {{> reactiveTable settings=settings}}
        </div>
    </div>
</template>

<template name="checkTest">
    {{#with test}}
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3>{{name}}</h3>
            </div>
            <div class="panel-body">
                {{#if testResult.result}}
                        <h3 class="text-center">Результат: <span class="badge">{{testResult.result}}</span> / <span
                                class="badge">100</span></h3>
                {{else }}
                    <div>
                        <div>
                            <ol>
                                {{#each questions}}

                                    <li style="margin-bottom: 2em;">
                                        {{name}}
                                        <span class="glyphicon glyphicon-check cursor-pointer set-valid" style="{{activeAnswer @index}}" data-id="{{@index}}" ></span>
                                        <p style="margin-left: 1em;">
                                            {{answer @index}}
                                        </p>
                                    </li>
                                {{/each}}
                            </ol>
                        </div>
                        <div class="btn btn-success" id="checkComplete" data-id="{{testResult._id}}">Відіслати відповіді
                        </div>
                    </div>
                {{/if}}
            </div>
        </div>
    {{/with}}
</template>
